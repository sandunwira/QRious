<!DOCTYPE html>
<html>

<head>

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,300;0,6..12,400;0,6..12,500;0,6..12,600;0,6..12,700;1,6..12,300;1,6..12,400;1,6..12,500;1,6..12,600;1,6..12,700&display=swap" rel="stylesheet">

	<script type="module" src="/main.js" defer></script>
	<script src="/js/qrcode.min.js" defer></script>

</head>

<body>

	<h1>QRious</h1>
	<h2>QR Code Generator</h2>

	<div class="container">
		<div class="input-data">
			<form id="qrgenerateform">
				<input type="text" id="qrgenerateforminput" placeholder="Enter your text here" required>
				<button id="generate" type="submit">Generate</button>
				<button id="qrdownload" type="button">Download</button>
				<button id="qrclear" type="button">Clear</button>
			</form>
		</div>
		<div class="output-data">
			<div id="qrcode"></div>
		</div>
	</div>

	<script>
		const qrgenerateform = document.getElementById('qrgenerateform');
		const qrcode = document.getElementById('qrcode');
		const qrgenerateforminput = document.getElementById('qrgenerateforminput');
		const qrdownload = document.getElementById('qrdownload');
		const qrclear = document.getElementById('qrclear');

		qrgenerateform.addEventListener('submit', (e) => {
			e.preventDefault();
			new QRCode(qrcode, qrgenerateforminput.value);
		});

		qrdownload.addEventListener('click', () => {
			const canvas = document.querySelector('canvas');
			const image = canvas.toDataURL('image/png');
			const link = document.createElement('a');
			link.href = image;
			link.download = `qrious_${qrgenerateforminput.value}.png`;
			link.click();
		});

		qrclear.addEventListener('click', () => {
			qrcode.innerHTML = '';
			qrgenerateforminput.value = '';
		});
	</script>

</body>

</html>